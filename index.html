<!DOCTYPE html>
<html lang="fr">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <script src="https://cdn.tailwindcss.com"></script>
   <title>Mini Food Truck</title>
</head>

<body class="bg-gray-900 min-h-screen">

   <!-- Header -->
   <header class="bg-gray-800 shadow-lg border-b-2 border-orange-500">
      <div class="container mx-auto px-4 py-6">
         <div class="flex justify-between items-center">
            <!-- Titre -->
            <h1 class="text-3xl font-bold text-white">
               Mini Food Truck
            </h1>

            <div class="flex items-center gap-4">
               <!-- Compte -->
               <a href="compte.html"
                  class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors flex items-center gap-2">
                  <span>ðŸ‘¤ Sylvain ANTON</span>
               </a>

               <!-- Panier -->
               <a href="panier.html"
                  class="bg-white text-orange-500 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors flex items-center gap-2">
                  ðŸ›’ Panier (<span id="cart-count">0</span>)
               </a>
            </div>
         </div>
      </div>
   </header>

   <div class="container mx-auto p-8">
      <div id="menu-container">
      </div>
   </div>

   <script type="module" src="js/display-menus.js"></script>
   <script type="module">
      import { panier } from './js/panier.js';
      import { wallet } from './js/wallet.js';

      function updateCartCount() {
         const count = panier.items.reduce((total, item) => total + item.quantite, 0);
         document.getElementById('cart-count').textContent = count;
      }

      function updateWalletDisplay() {
         document.getElementById('wallet-balance').textContent = wallet.getBalance().toFixed(2);
      }

      // GÃ©rer le bouton d'ajout de fonds
      document.getElementById('add-funds').addEventListener('click', () => {
         const amount = parseFloat(prompt('Montant Ã  ajouter (â‚¬):', '10'));
         if (!isNaN(amount) && amount > 0) {
            wallet.deposit(amount);
         }
      });

      // Ã‰couter les mises Ã  jour
      window.addEventListener('panierUpdate', updateCartCount);
      window.addEventListener('walletUpdate', updateWalletDisplay);

      // Initialiser les affichages
      updateCartCount();
      updateWalletDisplay();
   </script>
</body>

</html>